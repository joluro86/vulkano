{% extends 'index.html' %}

{% block content %}

{% if messages %}
  <div class="mb-4">
    {% for message in messages %}
      <div class="bg-red-100 text-red-700 p-2 rounded mb-2">{{ message }}</div>
    {% endfor %}
  </div>
{% endif %}

<div class="p-6 max-w-2xl mx-auto bg-white rounded shadow">
  <h1 class="text-2xl font-semibold mb-6 text-gray-800">Generar Cotización</h1>

  <form method="post" novalidate>
    {% csrf_token %}

    <div class="mb-4">
      <label for="{{ form.cliente.id_for_label }}" class="block font-semibold text-gray-700 mb-1">Cliente</label>
      {{ form.cliente }}
      {% if form.cliente.errors %}
        <p class="text-red-600 text-sm mt-1">{{ form.cliente.errors.0 }}</p>
      {% endif %}
    </div>

    <div class="mb-4">
      <label for="{{ form.producto.id_for_label }}" class="block font-semibold text-gray-700 mb-1">Producto</label>
      {{ form.producto }}
      {% if form.producto.errors %}
        <p class="text-red-600 text-sm mt-1">{{ form.producto.errors.0 }}</p>
      {% endif %}
    </div>

    <div class="mb-4">
      <label for="{{ form.fecha_inicio.id_for_label }}" class="block font-semibold text-gray-700 mb-1">Fecha Inicio</label>
      {{ form.fecha_inicio }}
      {% if form.fecha_inicio.errors %}
        <p class="text-red-600 text-sm mt-1">{{ form.fecha_inicio.errors.0 }}</p>
      {% endif %}
    </div>

    <div class="mb-4">
      <label for="{{ form.fecha_fin.id_for_label }}" class="block font-semibold text-gray-700 mb-1">Fecha Fin</label>
      {{ form.fecha_fin }}
      {% if form.fecha_fin.errors %}
        <p class="text-red-600 text-sm mt-1">{{ form.fecha_fin.errors.0 }}</p>
      {% endif %}
    </div>

    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
      Generar Cotización
    </button>
  </form>

  {% if cotizacion %}
    <div class="mt-6 p-4 bg-blue-50 border border-blue-300 rounded">
      <h2 class="text-xl font-semibold text-blue-700 mb-2">Cotización generada:</h2>
      <p><strong>Cliente:</strong> {{ cotizacion.cliente }}</p>
      <p><strong>Producto:</strong> {{ cotizacion.producto }}</p>
      <p><strong>Fechas:</strong> {{ cotizacion.fecha_inicio }} a {{ cotizacion.fecha_fin }}</p>
      <p><strong>Total estimado:</strong> ${{ cotizacion.total }}</p>
    </div>
  {% endif %}
</div>

{% endblock %}