{% extends 'index.html' %}

{% block content %}
<div class="p-6 max-w-2xl mx-auto bg-white rounded shadow">
  <h1 class="text-2xl font-semibold mb-6 text-gray-800">Generar Cotización</h1>

  <form method="post" action="" novalidate>
    {% csrf_token %}

    <div class="mb-4">
      <label for="cliente" class="block font-semibold text-gray-700 mb-1">Cliente</label>
      <select name="cliente" id="cliente" class="w-full border rounded px-3 py-2">
        {% for cliente in clientes %}
          <option value="{{ cliente.id }}">{{ cliente.nombre }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-4">
      <label for="producto" class="block font-semibold text-gray-700 mb-1">Producto</label>
      <select name="producto" id="producto" class="w-full border rounded px-3 py-2">
        {% for producto in productos %}
          <option value="{{ producto.id }}">{{ producto.nombre }} - {{ producto.precio }}</option>
        {% endfor %}
      </select>
    </div>

    <div class="mb-4">
      <label for="fecha_inicio" class="block font-semibold text-gray-700 mb-1">Fecha Inicio</label>
      <input type="date" name="fecha_inicio" class="w-full border rounded px-3 py-2">
    </div>

    <div class="mb-4">
      <label for="fecha_fin" class="block font-semibold text-gray-700 mb-1">Fecha Fin</label>
      <input type="date" name="fecha_fin" class="w-full border rounded px-3 py-2">
    </div>

    <button type="submit" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">
      Generar Cotización
    </button>
  </form>

  {% if cotizacion %}
  <div class="mt-6 p-4 bg-blue-50 border border-blue-300 rounded">
    <h2 class="text-xl font-semibold text-blue-700 mb-2">Cotización generada:</h2>
    <p><strong>Cliente:</strong> {{ cotizacion.cliente }}</p>
    <p><strong>Producto:</strong> {{ cotizacion.producto }}</p>
    <p><strong>Fechas:</strong> {{ cotizacion.fecha_inicio }} a {{ cotizacion.fecha_fin }}</p>
    <p><strong>Total estimado:</strong> ${{ cotizacion.total }}</p>
  </div>
  {% endif %}
</div>
{% endblock %}
