{% extends 'index.html' %}
{% load humanize %}

{% block breadcrumb %}
  {% include 'breadcrumb.html' with home='/' breadcrumbs=breadcrumb_items %}
{% endblock %}

{% block content %}
<div class="max-w-6xl mx-auto mt-6 bg-white p-6 rounded shadow">
  <div class="flex justify-between items-center mb-4">
    <h2 class="text-xl font-bold text-gray-800">Alquileres registrados</h2>
    <a href="{% url 'crear_alquiler' %}" class="bg-[var(--primary-color)] text-white px-4 py-2 rounded hover:bg-blue-700 transition text-sm">
      + Nuevo alquiler
    </a>
  </div>

  <table class="min-w-full bg-white border border-gray-200 text-sm rounded">
    <thead class="bg-gray-100 text-left">
      <tr>
        <th class="p-2">ID</th>
        <th class="p-2">Usuario</th>
        <th class="p-2">Inicio</th>
        <th class="p-2">Fin</th>
        <th class="p-2">Creado</th>
        <th class="p-2">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for a in alquileres %}
        <tr class="border-t">
          <td class="p-2 font-semibold text-gray-700">#{{ a.id }}</td>
          <td class="p-2">{{ a.usuario.username }}</td>
          <td class="p-2">{{ a.fecha_inicio|default:"—" }}</td>
          <td class="p-2">{{ a.fecha_fin|default:"—" }}</td>
          <td class="p-2">{{ a.created_at|date:"Y-m-d H:i" }}</td>
          <td class="p-2">
            <a href="{% url 'editar_alquiler' a.id %}" class="text-[var(--primary-color)] hover:underline">Editar</a>
          </td>
        </tr>
      {% empty %}
        <tr>
          <td colspan="6" class="p-4 text-center text-gray-500">No hay alquileres registrados.</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
